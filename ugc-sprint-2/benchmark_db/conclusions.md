## Выбор хранилища

Сравнивались MongoDB и Clickhouse. 
Для хранилища лайков, рецензий и закладок фильмов на основании замеров выбрана NoSQL база данных MongoDB.

Результаты замеров среднего времени выполнения запросов к базам данным, а также информацяи о топологии баз данных, 
количестве записей в тестовых таблицах и занимаемом месте на диске приведена в файлах 
[clickhouse_benchmark.md](clickhouse_benchmark.md) и [mongodb_benchmark.md](mongodb_benchmark.md).

Выбор MongoDB обусловлен следующими причинами:
1. Существенно более высокая скорость выполнения чтения из базы данных (для некоторых запросов в 5-6 раз), 
по сравнению с Сlickhouse. Для некоторых вариантов запросов средние показатели 
Clickhouse находятся вблизи установленного ограничения по времени ответа сервиса 200 мс, а единичные значения выходят 
за нее.
2. Гибкий механизм организации данных в документах MongoDB, в некоторых случаях позволяющий избежать их дублирования
или наоборот использовать дублирование и вложенные документы для увеличения скорости доступа к данным.
3. Мощный механизм работы с полями документа при CRUD, допускающий вставку или удаление значений массивов значений или 
вложенных документов без необходимости внесения изменения в весь документ. 
4. Использование фреймворка агрегации также позволяет добиться ускорения доступа к часто используемым данным и данным 
на основе агрегированных показателей. Для Clickhouse аналогичной функциональности можно добиться используя 
AggregatingMergeTree.

При этом с точки зрения занимаемого места на диске за счет более эффективного сжатия однородных данных в столбцах 
базы данных существенно выигрывает Clickhouse. MongoDB в этом случае предъявляет более высокие требования к 
проектированию модели коллекций и схем документов, для уменьшения занимаемого места на диске.